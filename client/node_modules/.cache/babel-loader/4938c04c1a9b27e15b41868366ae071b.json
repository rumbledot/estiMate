{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abram\\\\Documents\\\\MSwDev 2019\\\\SWEN503\\\\Individual\\\\MERN\\\\client\\\\src\\\\pages\\\\estimate.jsx\";\nimport React, { Component } from 'react';\nimport AppNavbar from '../components/AppNavbar';\nimport AddQuoteItem from '../components/AddQuoteItem';\nimport { Container, ListGroup, ListGroupItem, Input, Button } from 'reactstrap';\nimport { Provider } from 'react-redux';\nimport store from '../store';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport '../App.css';\nimport p5 from 'p5';\n\nconst P5 = ({\n  setup,\n  draw\n}) => {\n  const sketch = p5 => {\n    p5.setup = () => setup(p5);\n\n    p5.draw = () => draw(p5);\n  };\n\n  new p5(sketch);\n  return React.createElement(React.Fragment, null);\n};\n\nclass p5Line {\n  constructor(sx, sy, ex, ey) {\n    this.sx = sx;\n    this.sy = sy;\n    this.ex = ex;\n    this.ey = ey;\n  }\n\n  sx() {\n    return this.sx;\n  }\n\n  sy() {\n    return this.sy;\n  }\n\n  ex() {\n    return this.ex;\n  }\n\n  ey() {\n    return this.ey;\n  }\n\n  setsx(sx) {\n    this.sx = sx;\n  }\n\n  setsy(sy) {\n    this.sy = sy;\n  }\n\n  setex(ex) {\n    this.ex = ex;\n  }\n\n  setey(ey) {\n    this.ey = ey;\n  }\n\n}\n/*** P5 Drawing vars ***/\n\n\nvar graphic = null;\nvar lineOrigin = null;\nvar grid = 20;\nvar lines = [];\n\nfunction drawOnGraphic(p5) {\n  if (lineOrigin == null) {\n    lineOrigin = [Math.floor(p5.mouseX / grid) * grid, Math.floor(p5.mouseY / grid) * grid];\n  } else {\n    p5.strokeWeight(4);\n    p5.stroke(60);\n    let destX = Math.floor(p5.mouseX / grid) * grid;\n    let destY = Math.floor(p5.mouseY / grid) * grid;\n    p5.line(lineOrigin[0], lineOrigin[1], destX, destY);\n  }\n}\n\nfunction onMouseQuit(p5) {\n  if (lineOrigin != null) {\n    graphic.strokeWeight(4);\n    graphic.stroke(30);\n    graphic.line(lineOrigin[0], lineOrigin[1], Math.floor(p5.mouseX / grid) * grid, Math.floor(p5.mouseY / grid) * grid);\n    let newLine = new p5Line(lineOrigin[0], lineOrigin[1], Math.floor(p5.mouseX / grid) * grid, Math.floor(p5.mouseY / grid) * grid);\n    lines.push(newLine);\n    console.log(lines);\n    lineOrigin = null;\n  }\n}\n\nfunction reDrawLines(p5) {\n  for (let i = 0; i < lines.length; i++) {\n    let exist = lines[i];\n    graphic.strokeWeight(4);\n    graphic.stroke(30);\n    graphic.line(exist.sx, exist.sy, exist.ex, exist.ey);\n  }\n}\n\nclass EstimatePage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      quotedItems: [],\n      itemTotal: [],\n      grandTotal: 0.0,\n      lines: []\n    };\n\n    this.getQuoteItem = item => {\n      var joined = this.state.quotedItems.concat(item); // console.log(\"add new item :\" + joined)\n      // console.log(\"add new item :\" + this.state.quotedItems)\n\n      this.setState({\n        quotedItems: joined\n      }); // console.log(this.state.quotedItems)\n    };\n\n    this.onChange = e => {\n      if (parseInt(e.target.value)) {\n        // console.log(\"change\" + e.target.value * e.target.name)\n        const t = parseInt(e.target.value) * parseInt(e.target.name);\n        const i = parseInt(e.target.id);\n        this.state.itemTotal[i] = t;\n        this.setState(this.state.itemTotal);\n        this.getGrandTotal(); // console.log(\"total item: at index\" + i +\" is \" + this.state.itemTotal[i])\n      } else {\n        e.target.value = '';\n        e.target.placeholder = \"Please enter valid a number\"; // console.log(\"not number\")\n      }\n    };\n\n    this.getGrandTotal = () => {\n      for (let i = 0; i < this.state.itemTotal.length; i++) {\n        this.state.grandTotal += this.state.itemTotal[i];\n      } // console.log(\"Grand total\" + this.state.grandTotal)\n\n\n      this.forceUpdate(); // this.setState(this.state.grandTotal)\n    };\n\n    this.removeQuoteItem = index => {\n      let array = [...this.state.quotedItems];\n      this.state.grandTotal -= this.state.itemTotal[index];\n      console.log(\"index \" + index);\n      console.log(\"item removed val \" + this.state.itemTotal[index]);\n      console.log(\"Grand total\" + this.state.grandTotal);\n      array.splice(index, 1);\n      this.setState({\n        quotedItems: array\n      });\n    };\n  }\n\n  setup(p5) {\n    var cnv = p5.createCanvas(280, 640);\n    var x = (p5.windowWidth - p5.width) / 2;\n    var y = (p5.windowHeight - p5.height) / 2;\n    cnv.position(10, y);\n    graphic = p5.createGraphics(280, 640);\n    graphic.background(122);\n    p5.ellipseMode(p5.CENTER);\n    reDrawLines(p5);\n  }\n\n  draw(p5) {\n    p5.background(122);\n    p5.image(graphic, 0, 0);\n    p5.strokeWeight(1);\n    p5.noFill();\n    let gX = Math.floor(p5.mouseX / grid) * grid;\n    let gY = Math.floor(p5.mouseY / grid) * grid;\n    p5.ellipse(gX, gY, 10, 10);\n\n    if (p5.mouseIsPressed) {\n      drawOnGraphic(p5);\n    } else {\n      onMouseQuit(p5);\n    }\n  }\n\n  render() {\n    return React.createElement(Provider, {\n      store: store,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(AppNavbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }), React.createElement(P5, {\n      setup: this.setup,\n      draw: this.draw,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }), React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \"Estimate your house's cost\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, \"Estimated total cost : $\", this.state.grandTotal), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }), React.createElement(AddQuoteItem, {\n      toEstimate: this.getQuoteItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }), React.createElement(ListGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, this.state.quotedItems.map((item, index) => React.createElement(ListGroupItem, {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, item.name, \" - Price per unit $\", item.price, React.createElement(Input, {\n      type: \"text\",\n      pattern: \"[0-9]*\",\n      name: item.price,\n      id: index,\n      placeholder: item.measured_by,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      id: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, \"Item cost $\", this.state.itemTotal[index]), React.createElement(Button, {\n      color: \"danger\",\n      className: \"btn btn-sm\",\n      onClick: this.removeQuoteItem.bind(index),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, \"\\xD7\")))))));\n  }\n\n} // const EstimatePage = () => {\n//     const quotedItems = []\n//     const name = ''\n//     const getQuoteItem = (name) => {\n//         quotedItems.add(name)\n//     }\n//     return (\n//         <Provider store={store}>\n//         <div>\n//             <AppNavbar/>\n//             <Container>\n//                 <h1>Estimate you house cost</h1>\n//                 <br></br>\n//                 <h4>Estimated total cost : 0.00 $</h4>\n//                 <br></br>\n//                 <AddQuoteItem toEstimate = { this.getQuoteItem }/>\n//             </Container>\n//         </div>\n//         </Provider>\n//     )\n// }\n\n\nexport default EstimatePage;","map":{"version":3,"sources":["C:/Users/Abram/Documents/MSwDev 2019/SWEN503/Individual/MERN/client/src/pages/estimate.jsx"],"names":["React","Component","AppNavbar","AddQuoteItem","Container","ListGroup","ListGroupItem","Input","Button","Provider","store","p5","P5","setup","draw","sketch","p5Line","constructor","sx","sy","ex","ey","setsx","setsy","setex","setey","graphic","lineOrigin","grid","lines","drawOnGraphic","Math","floor","mouseX","mouseY","strokeWeight","stroke","destX","destY","line","onMouseQuit","newLine","push","console","log","reDrawLines","i","length","exist","EstimatePage","state","quotedItems","itemTotal","grandTotal","getQuoteItem","item","joined","concat","setState","onChange","e","parseInt","target","value","t","name","id","getGrandTotal","placeholder","forceUpdate","removeQuoteItem","index","array","splice","cnv","createCanvas","x","windowWidth","width","y","windowHeight","height","position","createGraphics","background","ellipseMode","CENTER","image","noFill","gX","gY","ellipse","mouseIsPressed","render","map","price","measured_by","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport AppNavbar from '../components/AppNavbar'\r\nimport AddQuoteItem from '../components/AddQuoteItem'\r\n\r\nimport { \r\n    Container, \r\n    ListGroup, \r\n    ListGroupItem,\r\n    Input,\r\n    Button\r\n} from 'reactstrap'\r\n\r\nimport { Provider } from 'react-redux'\r\nimport store from '../store'\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport '../App.css';\r\n\r\nimport p5 from 'p5';\r\n\r\nconst P5 = ({ setup, draw }) => {\r\n    const sketch = p5 => {\r\n    p5.setup = () => setup(p5);\r\n    p5.draw = () => draw(p5);\r\n    };\r\n    new p5(sketch);\r\n\r\n    return <></>;\r\n};\r\n\r\nclass p5Line {\r\n    constructor(sx, sy, ex, ey) {\r\n        this.sx = sx\r\n        this.sy = sy\r\n        this.ex = ex\r\n        this.ey = ey\r\n    }\r\n\r\n    sx() {\r\n        return this.sx;\r\n    }\r\n\r\n    sy() {\r\n        return this.sy;\r\n    }\r\n\r\n    ex() {\r\n        return this.ex;\r\n    }\r\n\r\n    ey() {\r\n        return this.ey;\r\n    }\r\n\r\n    setsx(sx) {\r\n        this.sx = sx\r\n    }\r\n\r\n    setsy(sy) {\r\n        this.sy = sy\r\n    }\r\n\r\n    setex(ex) {\r\n        this.ex = ex\r\n    }\r\n\r\n    setey(ey) {\r\n        this.ey = ey\r\n    }\r\n}\r\n\r\n/*** P5 Drawing vars ***/\r\n    var graphic = null\r\n\r\n    var lineOrigin = null\r\n\r\n    var grid = 20\r\n    var lines = []\r\n\r\n    function drawOnGraphic(p5) {\r\n        if (lineOrigin == null) {\r\n            lineOrigin = [(Math.floor(p5.mouseX / grid)) * grid, (Math.floor(p5.mouseY / grid)) * grid]\r\n        } else {\r\n            p5.strokeWeight(4)\r\n            p5.stroke(60)\r\n            let destX = (Math.floor(p5.mouseX / grid)) * grid\r\n            let destY = (Math.floor(p5.mouseY / grid)) * grid\r\n            p5.line(lineOrigin[0], lineOrigin[1], destX, destY)\r\n        }\r\n    }\r\n\r\n    function onMouseQuit(p5) {\r\n    if (lineOrigin != null) {\r\n        graphic.strokeWeight(4)\r\n        graphic.stroke(30)\r\n        graphic.line(lineOrigin[0], lineOrigin[1], (Math.floor(p5.mouseX / grid)) * grid, (Math.floor(p5.mouseY / grid)) * grid)\r\n\r\n        let newLine = new p5Line(lineOrigin[0], lineOrigin[1], (Math.floor(p5.mouseX / grid)) * grid, (Math.floor(p5.mouseY / grid)) * grid)\r\n        lines.push(newLine)\r\n        console.log(lines)\r\n\r\n        lineOrigin = null\r\n        }\r\n    }\r\n\r\n    function reDrawLines(p5) {\r\n        for (let i = 0; i < lines.length; i++) {\r\n            let exist = lines[i]\r\n            graphic.strokeWeight(4)\r\n            graphic.stroke(30)\r\n            graphic.line(exist.sx, exist.sy, exist.ex, exist.ey)\r\n        }\r\n    }\r\n\r\nclass EstimatePage extends Component {\r\n\r\n    state = {\r\n        quotedItems: [],\r\n        itemTotal: [],\r\n        grandTotal: 0.0,\r\n        lines: []\r\n    }\r\n\r\n    setup(p5) {\r\n        var cnv = p5.createCanvas(280,640)\r\n        var x = (p5.windowWidth - p5.width) / 2\r\n        var y = (p5.windowHeight - p5.height) / 2\r\n        cnv.position(10, y)\r\n        graphic = p5.createGraphics(280, 640)\r\n        graphic.background(122)\r\n\r\n        p5.ellipseMode(p5.CENTER)\r\n        reDrawLines(p5)\r\n    }\r\n\r\n    draw(p5) {\r\n        p5.background(122)\r\n        p5.image(graphic, 0, 0)\r\n\r\n        p5.strokeWeight(1)\r\n        p5.noFill()\r\n        let gX = (Math.floor(p5.mouseX / grid)) * grid\r\n        let gY = (Math.floor(p5.mouseY / grid)) * grid\r\n        p5.ellipse(gX, gY, 10, 10)\r\n\r\n        if (p5.mouseIsPressed) {\r\n            drawOnGraphic(p5)\r\n        } else {\r\n            onMouseQuit(p5)\r\n        }\r\n    }\r\n\r\n    getQuoteItem = (item) => {\r\n        var joined = this.state.quotedItems.concat(item)\r\n        // console.log(\"add new item :\" + joined)\r\n        // console.log(\"add new item :\" + this.state.quotedItems)\r\n        this.setState({ quotedItems: joined })\r\n        // console.log(this.state.quotedItems)\r\n    }\r\n\r\n    onChange = (e) => {\r\n        if (parseInt(e.target.value)) {\r\n            // console.log(\"change\" + e.target.value * e.target.name)\r\n            const t = parseInt(e.target.value) * parseInt(e.target.name)\r\n            const i = parseInt(e.target.id)\r\n\r\n            this.state.itemTotal[i] = t\r\n            this.setState(this.state.itemTotal)\r\n\r\n            this.getGrandTotal()\r\n\r\n            // console.log(\"total item: at index\" + i +\" is \" + this.state.itemTotal[i])\r\n        } else {\r\n            e.target.value=''\r\n            e.target.placeholder = \"Please enter valid a number\"\r\n            // console.log(\"not number\")\r\n        }\r\n    }\r\n\r\n    getGrandTotal = () => {\r\n        for (let i=0; i < this.state.itemTotal.length; i++) {\r\n            this.state.grandTotal += this.state.itemTotal[i]\r\n        }\r\n        // console.log(\"Grand total\" + this.state.grandTotal)\r\n        this.forceUpdate()\r\n        // this.setState(this.state.grandTotal)\r\n    }\r\n\r\n    removeQuoteItem = (index) => {\r\n        let array = [...this.state.quotedItems]\r\n        this.state.grandTotal -= this.state.itemTotal[index]\r\n        console.log(\"index \" + index)\r\n        console.log(\"item removed val \" + this.state.itemTotal[index])\r\n        console.log(\"Grand total\" + this.state.grandTotal)\r\n        array.splice(index, 1)\r\n        this.setState({quotedItems: array})\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Provider store={store}>\r\n            <div>\r\n                <AppNavbar/>\r\n                <P5 setup={this.setup} draw={this.draw}/>\r\n                <Container>\r\n                    <h1>Estimate your house's cost</h1>\r\n                    <br></br>\r\n                    <h4>Estimated total cost : ${this.state.grandTotal}</h4>\r\n                    <br></br>\r\n                    <AddQuoteItem toEstimate = { this.getQuoteItem }/>\r\n                    <ListGroup>\r\n                        {this.state.quotedItems.map(( item, index ) => (\r\n                            <ListGroupItem \r\n                            key={index}>\r\n                                {item.name} - Price per unit ${item.price}\r\n                            <Input \r\n                                type=\"text\"\r\n                                pattern=\"[0-9]*\"\r\n                                name={item.price}\r\n                                id={index}\r\n                                placeholder={item.measured_by}\r\n                                onChange={this.onChange}/>\r\n                            <p id={index}>Item cost ${this.state.itemTotal[index]}</p>\r\n                            <Button\r\n                                color=\"danger\"\r\n                                className=\"btn btn-sm\"\r\n                                onClick={this.removeQuoteItem.bind(index)}\r\n                            >&times;</Button>\r\n                            </ListGroupItem>\r\n                        ))}\r\n                    </ListGroup>\r\n                </Container>\r\n            </div>\r\n            </Provider>\r\n        )\r\n    }\r\n}\r\n\r\n// const EstimatePage = () => {\r\n\r\n//     const quotedItems = []\r\n//     const name = ''\r\n\r\n//     const getQuoteItem = (name) => {\r\n//         quotedItems.add(name)\r\n//     }\r\n\r\n//     return (\r\n//         <Provider store={store}>\r\n//         <div>\r\n//             <AppNavbar/>\r\n//             <Container>\r\n//                 <h1>Estimate you house cost</h1>\r\n//                 <br></br>\r\n//                 <h4>Estimated total cost : 0.00 $</h4>\r\n//                 <br></br>\r\n//                 <AddQuoteItem toEstimate = { this.getQuoteItem }/>\r\n//             </Container>\r\n//         </div>\r\n//         </Provider>\r\n//     )\r\n// }\r\n\r\nexport default EstimatePage"]},"metadata":{},"sourceType":"module"}