{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\Abram\\\\Documents\\\\MSwDev 2019\\\\SWEN503\\\\Individual\\\\MERN\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Abram\\\\Documents\\\\MSwDev 2019\\\\SWEN503\\\\Individual\\\\MERN\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Abram\\\\Documents\\\\MSwDev 2019\\\\SWEN503\\\\Individual\\\\MERN\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\Abram\\\\Documents\\\\MSwDev 2019\\\\SWEN503\\\\Individual\\\\MERN\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _classCallCheck from\"C:\\\\Users\\\\Abram\\\\Documents\\\\MSwDev 2019\\\\SWEN503\\\\Individual\\\\MERN\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Abram\\\\Documents\\\\MSwDev 2019\\\\SWEN503\\\\Individual\\\\MERN\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import React,{Component}from'react';import AppNavbar from'../components/AppNavbar';import AddQuoteItem from'../components/AddQuoteItem';import{Container,ListGroup,ListGroupItem,Input,Button}from'reactstrap';import{Provider}from'react-redux';import store from'../store';import'bootstrap/dist/css/bootstrap.min.css';import'../App.css';import p5 from'p5';var P5=function P5(_ref){var setup=_ref.setup,draw=_ref.draw;var sketch=function sketch(p5){p5.setup=function(){return setup(p5);};p5.draw=function(){return draw(p5);};};new p5(sketch);return React.createElement(React.Fragment,null);};var p5Line=/*#__PURE__*/function(){function p5Line(sx,sy,ex,ey){_classCallCheck(this,p5Line);this.sx=sx;this.sy=sy;this.ex=ex;this.ey=ey;}_createClass(p5Line,[{key:\"sx\",value:function sx(){return this.sx;}},{key:\"sy\",value:function sy(){return this.sy;}},{key:\"ex\",value:function ex(){return this.ex;}},{key:\"ey\",value:function ey(){return this.ey;}},{key:\"setsx\",value:function setsx(sx){this.sx=sx;}},{key:\"setsy\",value:function setsy(sy){this.sy=sy;}},{key:\"setex\",value:function setex(ex){this.ex=ex;}},{key:\"setey\",value:function setey(ey){this.ey=ey;}}]);return p5Line;}();/*** P5 Drawing vars ***/var graphic=null;var lineOrigin=null;var grid=20;var lines=[];function drawOnGraphic(p5){if(lineOrigin==null){lineOrigin=[Math.floor(p5.mouseX/grid)*grid,Math.floor(p5.mouseY/grid)*grid];}else{p5.strokeWeight(4);p5.stroke(60);var destX=Math.floor(p5.mouseX/grid)*grid;var destY=Math.floor(p5.mouseY/grid)*grid;p5.line(lineOrigin[0],lineOrigin[1],destX,destY);}}function onMouseQuit(p5){if(lineOrigin!=null){graphic.strokeWeight(4);graphic.stroke(30);graphic.line(lineOrigin[0],lineOrigin[1],Math.floor(p5.mouseX/grid)*grid,Math.floor(p5.mouseY/grid)*grid);var newLine=new p5Line(lineOrigin[0],lineOrigin[1],Math.floor(p5.mouseX/grid)*grid,Math.floor(p5.mouseY/grid)*grid);lines.push(newLine);// console.log(lines)\nlineOrigin=null;}}function reDrawLines(p5){for(var i=0;i<lines.length;i++){var exist=lines[i];graphic.strokeWeight(4);graphic.stroke(30);graphic.line(exist.sx,exist.sy,exist.ex,exist.ey);}}var EstimatePage=/*#__PURE__*/function(_Component){_inherits(EstimatePage,_Component);function EstimatePage(){var _getPrototypeOf2;var _this;_classCallCheck(this,EstimatePage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(EstimatePage)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={quotedItems:[],itemTotal:[],grandTotal:0.0,lines:[]};_this.getQuoteItem=function(item){var joined=_this.state.quotedItems.concat(item);// console.log(\"add new item :\" + joined)\n// console.log(\"add new item :\" + this.state.quotedItems)\n_this.setState({quotedItems:joined});// console.log(this.state.quotedItems)\n};_this.onChange=function(e){if(parseInt(e.target.value)){// console.log(\"change\" + e.target.value * e.target.name)\nvar t=parseInt(e.target.value)*parseInt(e.target.name);var i=parseInt(e.target.id);// let arr = [...this.state.itemTotal]\n// arr[i] = t\n_this.state.itemTotal[i]=t;// this.setState({itemTotal: arr})\n_this.setState(_this.state.itemTotal);// console.log(this.state.itemTotal)\n_this.getGrandTotal();// console.log(\"total item: at index\" + i +\" is \" + this.state.itemTotal[i])\n}else{e.target.value='';e.target.placeholder=\"Please enter valid a number\";// console.log(\"not number\")\n}};_this.getGrandTotal=function(){// let t = [this.state.grandTotal]\n_this.state.grandTotal=0;for(var i=0;i<_this.state.itemTotal.length;i++){_this.state.grandTotal+=_this.state.itemTotal[i];// t += this.state.itemTotal[i]\n}// console.log(\"Grand total\" + this.state.grandTotal)\n// this.state.grandTotal = t\n_this.forceUpdate();// this.setState({grandTotal: t})\n};_this.removeQuoteItem=function(index){var array=_toConsumableArray(_this.state.quotedItems);_this.state.grandTotal-=_this.state.itemTotal[index];// console.log(\"index \" + index)\n// console.log(\"item removed val \" + this.state.itemTotal[index])\n// console.log(\"Grand total\" + this.state.grandTotal)\narray.splice(index,1);_this.state.itemTotal.splice(index,1);_this.setState({quotedItems:array});};return _this;}_createClass(EstimatePage,[{key:\"setup\",value:function setup(p5){var cnv=p5.createCanvas(280,640);var x=(p5.windowWidth-p5.width)/2;var y=(p5.windowHeight-p5.height)/2;cnv.position(10,y);graphic=p5.createGraphics(280,640);graphic.background(122);p5.ellipseMode(p5.CENTER);reDrawLines(p5);}},{key:\"draw\",value:function draw(p5){p5.background(122);p5.image(graphic,0,0);p5.strokeWeight(1);p5.noFill();var gX=Math.floor(p5.mouseX/grid)*grid;var gY=Math.floor(p5.mouseY/grid)*grid;p5.ellipse(gX,gY,10,10);if(p5.mouseIsPressed){drawOnGraphic(p5);}else{onMouseQuit(p5);}}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(Provider,{store:store},React.createElement(\"div\",null,React.createElement(AppNavbar,null),React.createElement(P5,{setup:this.setup,draw:this.draw}),React.createElement(Container,null,React.createElement(\"h1\",null,\"Estimate your house's cost\"),React.createElement(\"br\",null),React.createElement(\"h4\",null,\"Estimated total cost : $\",this.state.grandTotal),React.createElement(\"br\",null),React.createElement(AddQuoteItem,{toEstimate:this.getQuoteItem}),React.createElement(ListGroup,null,this.state.quotedItems.map(function(item,index){return React.createElement(ListGroupItem,{key:index},item.name,\" - Price per unit $\",item.price,React.createElement(Input,{type:\"text\",pattern:\"[0-9]*\",name:item.price,id:index,placeholder:item.measured_by,onChange:_this2.onChange}),React.createElement(\"p\",{id:index},\"Item cost $\",_this2.state.itemTotal[index]),React.createElement(Button,{color:\"danger\",className:\"btn btn-sm\",onClick:_this2.removeQuoteItem.bind(_this2,index)},\"\\xD7\"));})))));}}]);return EstimatePage;}(Component);// const EstimatePage = () => {\n//     const quotedItems = []\n//     const name = ''\n//     const getQuoteItem = (name) => {\n//         quotedItems.add(name)\n//     }\n//     return (\n//         <Provider store={store}>\n//         <div>\n//             <AppNavbar/>\n//             <Container>\n//                 <h1>Estimate you house cost</h1>\n//                 <br></br>\n//                 <h4>Estimated total cost : 0.00 $</h4>\n//                 <br></br>\n//                 <AddQuoteItem toEstimate = { this.getQuoteItem }/>\n//             </Container>\n//         </div>\n//         </Provider>\n//     )\n// }\nexport default EstimatePage;","map":{"version":3,"sources":["C:/Users/Abram/Documents/MSwDev 2019/SWEN503/Individual/MERN/client/src/pages/estimate.jsx"],"names":["React","Component","AppNavbar","AddQuoteItem","Container","ListGroup","ListGroupItem","Input","Button","Provider","store","p5","P5","setup","draw","sketch","p5Line","sx","sy","ex","ey","graphic","lineOrigin","grid","lines","drawOnGraphic","Math","floor","mouseX","mouseY","strokeWeight","stroke","destX","destY","line","onMouseQuit","newLine","push","reDrawLines","i","length","exist","EstimatePage","state","quotedItems","itemTotal","grandTotal","getQuoteItem","item","joined","concat","setState","onChange","e","parseInt","target","value","t","name","id","getGrandTotal","placeholder","forceUpdate","removeQuoteItem","index","array","splice","cnv","createCanvas","x","windowWidth","width","y","windowHeight","height","position","createGraphics","background","ellipseMode","CENTER","image","noFill","gX","gY","ellipse","mouseIsPressed","map","price","measured_by","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport AppNavbar from '../components/AppNavbar'\r\nimport AddQuoteItem from '../components/AddQuoteItem'\r\n\r\nimport { \r\n    Container, \r\n    ListGroup, \r\n    ListGroupItem,\r\n    Input,\r\n    Button\r\n} from 'reactstrap'\r\n\r\nimport { Provider } from 'react-redux'\r\nimport store from '../store'\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport '../App.css';\r\n\r\nimport p5 from 'p5';\r\n\r\nconst P5 = ({ setup, draw }) => {\r\n    const sketch = p5 => {\r\n    p5.setup = () => setup(p5);\r\n    p5.draw = () => draw(p5);\r\n    };\r\n    new p5(sketch);\r\n\r\n    return <></>;\r\n};\r\n\r\nclass p5Line {\r\n    constructor(sx, sy, ex, ey) {\r\n        this.sx = sx\r\n        this.sy = sy\r\n        this.ex = ex\r\n        this.ey = ey\r\n    }\r\n\r\n    sx() {\r\n        return this.sx;\r\n    }\r\n\r\n    sy() {\r\n        return this.sy;\r\n    }\r\n\r\n    ex() {\r\n        return this.ex;\r\n    }\r\n\r\n    ey() {\r\n        return this.ey;\r\n    }\r\n\r\n    setsx(sx) {\r\n        this.sx = sx\r\n    }\r\n\r\n    setsy(sy) {\r\n        this.sy = sy\r\n    }\r\n\r\n    setex(ex) {\r\n        this.ex = ex\r\n    }\r\n\r\n    setey(ey) {\r\n        this.ey = ey\r\n    }\r\n}\r\n\r\n/*** P5 Drawing vars ***/\r\n    var graphic = null\r\n\r\n    var lineOrigin = null\r\n\r\n    var grid = 20\r\n    var lines = []\r\n\r\n    function drawOnGraphic(p5) {\r\n        if (lineOrigin == null) {\r\n            lineOrigin = [(Math.floor(p5.mouseX / grid)) * grid, (Math.floor(p5.mouseY / grid)) * grid]\r\n        } else {\r\n            p5.strokeWeight(4)\r\n            p5.stroke(60)\r\n            let destX = (Math.floor(p5.mouseX / grid)) * grid\r\n            let destY = (Math.floor(p5.mouseY / grid)) * grid\r\n            p5.line(lineOrigin[0], lineOrigin[1], destX, destY)\r\n        }\r\n    }\r\n\r\n    function onMouseQuit(p5) {\r\n    if (lineOrigin != null) {\r\n        graphic.strokeWeight(4)\r\n        graphic.stroke(30)\r\n        graphic.line(lineOrigin[0], lineOrigin[1], (Math.floor(p5.mouseX / grid)) * grid, (Math.floor(p5.mouseY / grid)) * grid)\r\n\r\n        let newLine = new p5Line(lineOrigin[0], lineOrigin[1], (Math.floor(p5.mouseX / grid)) * grid, (Math.floor(p5.mouseY / grid)) * grid)\r\n        lines.push(newLine)\r\n        // console.log(lines)\r\n\r\n        lineOrigin = null\r\n        }\r\n    }\r\n\r\n    function reDrawLines(p5) {\r\n        for (let i = 0; i < lines.length; i++) {\r\n            let exist = lines[i]\r\n            graphic.strokeWeight(4)\r\n            graphic.stroke(30)\r\n            graphic.line(exist.sx, exist.sy, exist.ex, exist.ey)\r\n        }\r\n    }\r\n\r\nclass EstimatePage extends Component {\r\n\r\n    state = {\r\n        quotedItems: [],\r\n        itemTotal: [],\r\n        grandTotal: 0.0,\r\n        lines: []\r\n    }\r\n\r\n    setup(p5) {\r\n        var cnv = p5.createCanvas(280,640)\r\n        var x = (p5.windowWidth - p5.width) / 2\r\n        var y = (p5.windowHeight - p5.height) / 2\r\n        cnv.position(10, y)\r\n        graphic = p5.createGraphics(280, 640)\r\n        graphic.background(122)\r\n\r\n        p5.ellipseMode(p5.CENTER)\r\n        reDrawLines(p5)\r\n    }\r\n\r\n    draw(p5) {\r\n        p5.background(122)\r\n        p5.image(graphic, 0, 0)\r\n\r\n        p5.strokeWeight(1)\r\n        p5.noFill()\r\n        let gX = (Math.floor(p5.mouseX / grid)) * grid\r\n        let gY = (Math.floor(p5.mouseY / grid)) * grid\r\n        p5.ellipse(gX, gY, 10, 10)\r\n\r\n        if (p5.mouseIsPressed) {\r\n            drawOnGraphic(p5)\r\n        } else {\r\n            onMouseQuit(p5)\r\n        }\r\n    }\r\n\r\n    getQuoteItem = (item) => {\r\n        var joined = this.state.quotedItems.concat(item)\r\n        // console.log(\"add new item :\" + joined)\r\n        // console.log(\"add new item :\" + this.state.quotedItems)\r\n        this.setState({ quotedItems: joined })\r\n        // console.log(this.state.quotedItems)\r\n    }\r\n\r\n    onChange = (e) => {\r\n        if (parseInt(e.target.value)) {\r\n            // console.log(\"change\" + e.target.value * e.target.name)\r\n            let t = parseInt(e.target.value) * parseInt(e.target.name)\r\n            let i = parseInt(e.target.id)\r\n            // let arr = [...this.state.itemTotal]\r\n            // arr[i] = t\r\n            this.state.itemTotal[i] = t\r\n            // this.setState({itemTotal: arr})\r\n            this.setState(this.state.itemTotal)\r\n            // console.log(this.state.itemTotal)\r\n\r\n            this.getGrandTotal()\r\n\r\n            // console.log(\"total item: at index\" + i +\" is \" + this.state.itemTotal[i])\r\n        } else {\r\n            e.target.value=''\r\n            e.target.placeholder = \"Please enter valid a number\"\r\n            // console.log(\"not number\")\r\n        }\r\n    }\r\n\r\n    getGrandTotal = () => {\r\n        // let t = [this.state.grandTotal]\r\n        this.state.grandTotal = 0\r\n        for (let i=0; i < this.state.itemTotal.length; i++) {\r\n            this.state.grandTotal += this.state.itemTotal[i]\r\n            // t += this.state.itemTotal[i]\r\n        }\r\n        // console.log(\"Grand total\" + this.state.grandTotal)\r\n        // this.state.grandTotal = t\r\n        this.forceUpdate()\r\n        // this.setState({grandTotal: t})\r\n    }\r\n\r\n    removeQuoteItem = (index) => {\r\n        let array = [...this.state.quotedItems]\r\n        this.state.grandTotal -= this.state.itemTotal[index]\r\n        // console.log(\"index \" + index)\r\n        // console.log(\"item removed val \" + this.state.itemTotal[index])\r\n        // console.log(\"Grand total\" + this.state.grandTotal)\r\n        array.splice(index, 1)\r\n        this.state.itemTotal.splice(index, 1)\r\n        this.setState({quotedItems: array})\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Provider store={store}>\r\n            <div>\r\n                <AppNavbar/>\r\n                <P5 setup={this.setup} draw={this.draw}/>\r\n                <Container>\r\n                    <h1>Estimate your house's cost</h1>\r\n                    <br></br>\r\n                    <h4>Estimated total cost : ${this.state.grandTotal}</h4>\r\n                    <br></br>\r\n                    <AddQuoteItem toEstimate = { this.getQuoteItem }/>\r\n                    <ListGroup>\r\n                        {this.state.quotedItems.map(( item, index ) => (\r\n                            <ListGroupItem \r\n                            key={index}>\r\n                                {item.name} - Price per unit ${item.price}\r\n                            <Input \r\n                                type=\"text\"\r\n                                pattern=\"[0-9]*\"\r\n                                name={item.price}\r\n                                id={index}\r\n                                placeholder={item.measured_by}\r\n                                onChange={this.onChange}/>\r\n                            <p id={index}>Item cost ${this.state.itemTotal[index]}</p>\r\n                            <Button\r\n                                color=\"danger\"\r\n                                className=\"btn btn-sm\"\r\n                                onClick={this.removeQuoteItem.bind(this, index)}\r\n                            >&times;</Button>\r\n                            </ListGroupItem>\r\n                        ))}\r\n                    </ListGroup>\r\n                </Container>\r\n            </div>\r\n            </Provider>\r\n        )\r\n    }\r\n}\r\n\r\n// const EstimatePage = () => {\r\n\r\n//     const quotedItems = []\r\n//     const name = ''\r\n\r\n//     const getQuoteItem = (name) => {\r\n//         quotedItems.add(name)\r\n//     }\r\n\r\n//     return (\r\n//         <Provider store={store}>\r\n//         <div>\r\n//             <AppNavbar/>\r\n//             <Container>\r\n//                 <h1>Estimate you house cost</h1>\r\n//                 <br></br>\r\n//                 <h4>Estimated total cost : 0.00 $</h4>\r\n//                 <br></br>\r\n//                 <AddQuoteItem toEstimate = { this.getQuoteItem }/>\r\n//             </Container>\r\n//         </div>\r\n//         </Provider>\r\n//     )\r\n// }\r\n\r\nexport default EstimatePage"]},"metadata":{},"sourceType":"module"}